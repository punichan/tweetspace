-# scssファイルは、"tweet/_index.scss"にあります。
.main-contener
  .index-contener
    .tweets-contener
      .tweet-contener
        =link_to "","/tweets/#{@tweet.id}", class: "link-btn"
        .avater-contener
          =link_to (image_tag "#{@tweet.user.avater.url}", alt: "", class: "avater-size"), "/users/#{@tweet.user_id}" 
        .contents-contener
          .contents-contener__user
            =link_to "#{@tweet.user.name}", "/users/#{@tweet.user_id}", class:"user-name" 
            .daytime
              =@tweet.created_at.strftime("%Y-%m-%d %H:%M")
          .contents-contener__text
            =@tweet.tweet
          .contents-contener__image
          -if @tweet.image.url
            =link_to (image_tag @tweet.image.url, alt: "", class: "image-size"), "#"
          .contents-contener__contents
            -# =tweet.like
            .contents-contener__contents--icon-font= icon 'far', 'heart'
            .contents-contener__contents--comment-font=icon 'far', 'comments', "#{@tweet.comments.count}"
          
    .comments-contener
      -@comments.each do |comment|
        .comment-contener
          .avater-contener
            =link_to (image_tag "#{comment.user.avater.url}", alt: "", class: "avater-size"), "/users/#{comment.user_id}"
          .contents-contener
            .contents-contener__name
              =link_to "#{comment.user.name}", "/users/#{comment.user_id}", class:"user-name"
              .daytime
                =comment.created_at
            .contents-contener__comment
              =comment.comment
            -if user_signed_in? && comment.user_id == current_user.id
              .contents-contener__edits
                =link_to tweet_comment_path(comment.tweet_id, comment.id), method: :delete, class: "contents-contener__edits--edit" do
                  =icon 'fas', 'trash-alt'
                  -# コメント編集機能の実装
                -# =link_to edit_tweet_comment_path(comment.id), class: "contents-contener__edits--edit" do
                -#   =icon 'fas', 'trash-alt'
  -if user_signed_in?
    .form-contener
      =form_with model:[@tweet, @comment], local: true do |f|
        .field
          =f.label :comment
          %br/
          =f.text_area :comment
        .actions
          =f.submit "send", class: "actions__btn"

  -if user_signed_in? && current_user.id == @tweet.user_id
    .btn-box
      =render "shared/delete_btn"
      =render "shared/edit_btn"